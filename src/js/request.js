const API = '../src/json/latestProduct.json';

const getData = async (url) => {
    const request = await fetch(url);
    if (!request.ok) {
        throw new Error('Nimadir xato ketdi');
    }
    const data = request.json();
    return data;
}

getData(API).then((data) => {
    let datas = data.latestProduct;
    let parentEl = document.querySelector('.latestProduct__cards');
    for (let i =0; i < datas.length; i++) {
        let createEl = document.createElement('div');
        createEl.classList.add('latestProduct__card');

        let createElData = `
        <div class="card__photo">
                                <!-- <div class="overlay hiddin"></div> -->
                                <div class="card__icons hiddin">
                                    <svg class="cartIcon" width="25.000000" height="25.000000" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                        <defs>
                                            <clipPath id="clip2046_3746">
                                                <rect id="shopping-cart 1" width="25.000000" height="25.000000" fill="white" fill-opacity="0"/>
                                            </clipPath>
                                        </defs>
                                        <rect id="shopping-cart 1" width="25.000000" height="25.000000" fill="#FFFFFF" fill-opacity="0"/>
                                        <g clip-path="url(#clip2046_3746)">
                                            <path id="Vector" d="M8.05475 16.1625L8.05585 16.1625C8.05682 16.1625 8.0578 16.1622 8.05872 16.1622L21.3379 16.1622C21.6648 16.1622 21.9523 15.9453 22.0421 15.631L24.9717 5.37708C25.0349 5.15601 24.9907 4.91846 24.8524 4.73486C24.7139 4.55139 24.4974 4.44348 24.2676 4.44348L6.3656 4.44348L5.84204 2.08728C5.76746 1.7522 5.47028 1.51379 5.12695 1.51379L0.732422 1.51379C0.327881 1.51379 0 1.84167 0 2.24622C0 2.65076 0.327881 2.97864 0.732422 2.97864L4.53949 2.97864C4.6322 3.39612 7.04498 14.2539 7.18384 14.8785C6.40546 15.2169 5.85938 15.993 5.85938 16.8947C5.85938 18.1062 6.84509 19.0919 8.05664 19.0919L21.3379 19.0919C21.7424 19.0919 22.0703 18.764 22.0703 18.3595C22.0703 17.955 21.7424 17.6271 21.3379 17.6271L8.05664 17.6271C7.65283 17.6271 7.32422 17.2985 7.32422 16.8947C7.32422 16.4915 7.65173 16.1633 8.05475 16.1625ZM23.2966 5.90833L20.7853 14.6974L8.6441 14.6974L6.69098 5.90833L23.2966 5.90833Z" fill="#000000" fill-opacity="1.000000" fill-rule="nonzero"/>
                                            <path id="Vector" d="M7.32422 21.2889C7.32422 22.5005 8.30994 23.4862 9.52148 23.4862C10.733 23.4862 11.7188 22.5005 11.7188 21.2889C11.7188 20.0774 10.733 19.0917 9.52148 19.0917C8.30994 19.0917 7.32422 20.0774 7.32422 21.2889ZM9.52148 20.5565C9.92529 20.5565 10.2539 20.8851 10.2539 21.2889C10.2539 21.6927 9.92529 22.0214 9.52148 22.0214C9.11768 22.0214 8.78906 21.6927 8.78906 21.2889C8.78906 20.8851 9.11768 20.5565 9.52148 20.5565Z" fill="#000000" fill-opacity="1.000000" fill-rule="nonzero"/>
                                            <path id="Vector" d="M17.6758 21.2889C17.6758 22.5005 18.6615 23.4862 19.873 23.4862C21.0846 23.4862 22.0703 22.5005 22.0703 21.2889C22.0703 20.0774 21.0846 19.0917 19.873 19.0917C18.6615 19.0917 17.6758 20.0774 17.6758 21.2889ZM19.873 20.5565C20.2769 20.5565 20.6055 20.8851 20.6055 21.2889C20.6055 21.6927 20.2769 22.0214 19.873 22.0214C19.4692 22.0214 19.1406 21.6927 19.1406 21.2889C19.1406 20.8851 19.4692 20.5565 19.873 20.5565Z" fill="#000000" fill-opacity="1.000000" fill-rule="nonzero"/>
                                        </g>
                                    </svg>
                                    
    
                                    <svg width="30.921875" height="16.078125" viewBox="0 0 30.9219 16.0781" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                        <path id="Vector" d="M1.58594 8.04065L3.22345 9.6781C9.97345 16.4281 20.9547 16.4281 27.7047 9.6781L29.3359 8.04065L27.6985 6.4032C20.9485 -0.346802 9.96722 -0.346802 3.21722 6.4032L1.58594 8.04065ZM15.4609 15.9281C10.7234 15.9281 5.98596 14.1219 2.3797 10.5156L0.323486 8.45935C0.0922241 8.22815 0.0922241 7.85315 0.323486 7.6156L2.3797 5.55945C9.59222 -1.65308 21.3297 -1.65308 28.5422 5.55945L30.5984 7.6156C30.8297 7.84692 30.8297 8.22192 30.5984 8.45935L28.5422 10.5156C24.936 14.1219 20.1985 15.9281 15.4609 15.9281Z" fill="#000000" fill-opacity="1.000000" fill-rule="nonzero"/>
                                        <path id="Vector" d="M3.22345 9.6781C9.97345 16.4281 20.9547 16.4281 27.7047 9.6781L29.3359 8.04065L27.6985 6.4032C20.9485 -0.346802 9.96722 -0.346802 3.21722 6.4032L1.58594 8.04065L3.22345 9.6781ZM2.3797 10.5156L0.323486 8.45935C0.0922241 8.22815 0.0922241 7.85315 0.323486 7.6156L2.3797 5.55945C9.59222 -1.65308 21.3297 -1.65308 28.5422 5.55945L30.5984 7.6156C30.8297 7.84692 30.8297 8.22192 30.5984 8.45935L28.5422 10.5156C24.936 14.1219 20.1985 15.9281 15.4609 15.9281C10.7234 15.9281 5.98596 14.1219 2.3797 10.5156Z" stroke="#000000" stroke-opacity="1.000000" stroke-width="0.300000"/>
                                        <path id="Vector" d="M15.461 3.5094C12.961 3.5094 10.9297 5.54065 10.9297 8.04065C10.9297 10.5406 12.961 12.5719 15.461 12.5719C17.961 12.5719 19.9922 10.5406 19.9922 8.04065C19.9922 5.54065 17.961 3.5094 15.461 3.5094ZM15.461 13.7594C12.3047 13.7594 9.74225 11.1907 9.74225 8.04065C9.74225 4.8844 12.311 2.3219 15.461 2.3219C18.611 2.3219 21.1797 4.89062 21.1797 8.04065C21.1797 11.1969 18.6172 13.7594 15.461 13.7594Z" fill="#000000" fill-opacity="1.000000" fill-rule="nonzero"/>
                                        <path id="Vector" d="M10.9297 8.04065C10.9297 10.5406 12.961 12.5719 15.461 12.5719C17.961 12.5719 19.9922 10.5406 19.9922 8.04065C19.9922 5.54065 17.961 3.5094 15.461 3.5094C12.961 3.5094 10.9297 5.54065 10.9297 8.04065ZM9.74225 8.04065C9.74225 4.8844 12.311 2.3219 15.461 2.3219C18.611 2.3219 21.1797 4.89062 21.1797 8.04065C21.1797 11.1969 18.6172 13.7594 15.461 13.7594C12.3047 13.7594 9.74225 11.1907 9.74225 8.04065Z" stroke="#000000" stroke-opacity="1.000000" stroke-width="0.300000"/>
                                    </svg>
                                    
    
                                    <svg width="25.300049" height="22.526733" viewBox="0 0 25.3 22.5267" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                        <path id="Vector" d="M11.4928 21.8925C11.8038 22.2035 12.2218 22.3768 12.6602 22.3768C13.0936 22.3768 13.5218 22.1984 13.8276 21.8925L22.9885 12.7316C24.3802 11.3398 25.1449 9.48938 25.15 7.52661C25.15 5.55884 24.3853 3.70837 22.9937 2.31665C21.6019 0.924927 19.7565 0.160278 17.7887 0.160278C15.8566 0.160278 14.0366 0.899414 12.6552 2.24524C11.2685 0.894287 9.44348 0.150024 7.50629 0.150024C5.54358 0.150024 3.69812 0.914673 2.30646 2.30127C0.914734 3.69299 0.150024 5.54358 0.150024 7.51135C0.150024 9.474 0.9198 11.3246 2.31152 12.7163L11.4928 21.8925ZM3.19348 3.18835C4.34558 2.03625 5.88007 1.39905 7.51135 1.39905C9.1427 1.39905 10.6823 2.03625 11.8395 3.19348L12.2167 3.57068C12.334 3.68799 12.492 3.75427 12.6602 3.75427C12.8234 3.75427 12.9865 3.68799 13.1038 3.57068L13.4708 3.20361C14.628 2.04639 16.1625 1.40918 17.7989 1.40918C19.4302 1.40918 20.9647 2.04639 22.1168 3.19861C23.274 4.35583 23.9061 5.89026 23.9061 7.52161C23.9061 9.15283 23.2689 10.6874 22.1117 11.8446L12.9457 21.0105C12.7979 21.1583 12.5276 21.1583 12.3748 21.0105L3.19855 11.8344C2.04132 10.6771 1.40411 9.1427 1.40411 7.51135C1.40411 5.88 2.04132 4.34558 3.19348 3.18835Z" fill="#000000" fill-opacity="1.000000" fill-rule="nonzero"/>
                                        <path id="Vector" d="M12.6602 22.3768C13.0936 22.3768 13.5218 22.1984 13.8276 21.8925L22.9885 12.7316C24.3802 11.3398 25.1449 9.48938 25.15 7.52661C25.15 5.55884 24.3853 3.70837 22.9937 2.31665C21.6019 0.924927 19.7565 0.160278 17.7887 0.160278C15.8566 0.160278 14.0366 0.899414 12.6552 2.24524C11.2685 0.894287 9.44348 0.150024 7.50629 0.150024C5.54358 0.150024 3.69812 0.914673 2.30646 2.30127C0.914734 3.69299 0.150024 5.54358 0.150024 7.51135C0.150024 9.474 0.9198 11.3246 2.31152 12.7163L11.4928 21.8925C11.8038 22.2035 12.2218 22.3768 12.6602 22.3768ZM7.51135 1.39905C9.1427 1.39905 10.6823 2.03625 11.8395 3.19348L12.2167 3.57068C12.334 3.68799 12.492 3.75427 12.6602 3.75427C12.8234 3.75427 12.9865 3.68799 13.1038 3.57068L13.4708 3.20361C14.628 2.04639 16.1625 1.40918 17.7989 1.40918C19.4302 1.40918 20.9647 2.04639 22.1168 3.19861C23.274 4.35583 23.9061 5.89026 23.9061 7.52161C23.9061 9.15283 23.2689 10.6874 22.1117 11.8446L12.9457 21.0105C12.7979 21.1584 12.5276 21.1584 12.3748 21.0105L3.19855 11.8344C2.04132 10.6771 1.40411 9.1427 1.40411 7.51135C1.40411 5.88 2.04132 4.34558 3.19348 3.18835C4.34558 2.03625 5.88007 1.39905 7.51135 1.39905Z" stroke="#000000" stroke-opacity="1.000000" stroke-width="0.300000"/>
                                    </svg>
                                </div>
                                <img class="productPhoto" src=${datas[i].photoPath} alt="product1">
                                <div class="card__add_btn hiddin ">
                                    <a href="#!" class="add__btn">Add to cart</a>
                                </div>
                            </div>
                            <div class="product__body">
                                <h3 class="product__body_title">${datas[i].title}</h3>
                                <span class="product__body_price">$${datas[i].price}</span>
                            </div>
        `

        createEl.innerHTML = createElData;
        parentEl.appendChild(createEl);

    }
    
    let cardPhoto, cartIcons;
    cardPhoto = document.querySelectorAll('.productPhoto');
    cartIcons = document.querySelectorAll('.card__icons');
    cardPhoto.forEach((item, index) => {
        item.addEventListener('mouseover', () => {
            cartIcons[index].classList.remove('hiddin');
        })

        cartIcons[index].addEventListener("mouseout", (e) => {
            cartIcons[index].classList.add('hiddin')
        })
    })
    
}).catch((err) => {
    console.log(err);
})